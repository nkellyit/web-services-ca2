<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>Sign Up</h1>
        <input type="text" id="customerId" placeholder="Customer Id" />
        <input type="text" id="firstName" placeholder="First name" />
        <input type="text" id="lastName" placeholder="Last name" />
        <input type="text" id="email" placeholder="Email" />
        <input type="password" id="pin" placeholder="PIN" />
        <button id="sign-up" onclick="createCustomer()">Create Customer</button>
        <a href="accounts.html">I have an account already</a>

        <!--Create customer function - uses ajax to create URL with new customer details-->
        <script type="text/javascript">
            function createCustomer() {
                var customerBox = document.getElementById("customerId");
                var pinBox = document.getElementById("pin");
                var firstNameBox = document.getElementById("firstName");
                var lastNameBox = document.getElementById("lastName");
                var emailBox = document.getElementById("email");
                var customerId = customerBox.value;
                var firstName = firstNameBox.value;
                var lastName = lastNameBox.value;
                var email = emailBox.value;
                var pin = pinBox.value;

                var customer = {
                    "firstName": firstName,
                    "lastName": lastName,
                    "email": email,
                    "id": customerId,
                    "pin": pin
                };
            <!--Ajax code which creates POST request-->
                $.ajax({
                        url: "http://localhost:55000/api/customers",
                        type: "POST",
                        data: JSON.stringify(customer),
                        contentType: "application/json",
                        success: function(data) {
                            window.location.replace("accounts.html");
                        },
                        error: function(textStatus, errorThrown) {
                            alert("error");
                        }
                    }
                );
            }
        </script>
    </body>
</html>
